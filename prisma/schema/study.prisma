model Study {
    id                 String            @id @default(cuid())
    cdps               Admin[]           @relation("cdp")
    auditors           Admin[]           @relation("auditor")
    information        StudyInfos        @relation(fields: [informationId], references: [id])
    informationId      String            @unique
    studyProceedings   StudyProceedings?
    clients            StudyClient[]
    mri                Mri?
    studyAssignees     StudyAssignee[]
    satisfaction       Satisfaction?
    studyProceedingsId String?
}

model StudyInfos {
    id                String   @id @default(cuid())
    code              String   @unique
    googleFolder      String?  @unique
    title             String?
    applicationFee    Float    @default(5)
    cc                Boolean
    domains           Domain[]
    estimatedDuration Int?
    study             Study?
}

model StudyProceedings {
    id      String            @id @default(cuid())
    studyId String            @unique
    phases  Phase[]
    process StudyProgressStep @default(StudyCreation)
    study   Study             @relation(fields: [studyId], references: [id])
}

enum StudyProgressStep {
    StudyCreation
    Recruiting
    TripartiteMeeting
    WritingDocuments
    InStudy
    Ended
    CompanyFactored
    AssigneePaid
    SatisfactionForm
}

model Phase {
    id                 String            @id @default(cuid())
    jehs               Int
    deliverable        Deliverable?
    unitPrice          Float
    startDate          DateTime
    endDate            DateTime
    phaseStatus        PhaseStatus       @default(NotStarted)
    studyProceedings   StudyProceedings? @relation(fields: [studyProceedingsId], references: [id])
    studyProceedingsId String?
}

model Deliverable {
    id      String  @id @default(cuid())
    content String
    given   Boolean
    done    Boolean
    phase   Phase   @relation(fields: [phaseId], references: [id])
    phaseId String  @unique
}

enum PhaseStatus {
    NotStarted
    InProgress
    NeedsDeliverable
    Finished
}
